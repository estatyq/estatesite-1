# üêõ –ö–†–ò–¢–ò–ß–ù–Ü –ü–†–û–ë–õ–ï–ú–ò: –§—ñ–ª—å—Ç—Ä–∏ —Ç–∞ –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è

> **–î–∞—Ç–∞ –∑–≤—ñ—Ç—É**: October 28, 2025  
> **–û–±–ª–∞—Å—Ç—å**: index.html + pages/catalog.html  
> **–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**: –ö–†–ò–¢–ò–ß–ù–Ü (üî¥) + –°–ï–†–ô–û–ó–ù–Ü (üü°)

---

## üî¥ –ö–†–ò–¢–ò–ß–ù–Ü –ü–†–û–ë–õ–ï–ú–ò

### BUG-1: –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó URL-State –º—ñ–∂ index.html —Ç–∞ pages/catalog.html

**–°–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å**: üî¥ **–ö–†–ò–¢–ò–ß–ù–ê**  
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `js/script.js` (index.html)

#### –û–ø–∏—Å
–§—É–Ω–∫—Ü—ñ—è `updateURLState()` –Ω–∞ `index.html` –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ (—Å—Ç—Ä–æ–∫–∞ 2147-2150):
```javascript
function updateURLState() {
  // TODO: Implement URL state management
  // This will serialize filters to URL and use history.pushState
}
```

–¶–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ:
- üö´ –ù–µ–º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –ø–æ–¥—ñ–ª–∏—Ç–∏—Å—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏
- üö´ –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ñ—ñ–ª—å—Ç—Ä–∏ –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è
- üö´ Browser back/forward –∫–Ω–æ–ø–∫–∏ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å
- üö´ –†–æ–∑–±—ñ–∂–Ω—ñ—Å—Ç—å –∑ pages/catalog.html (–¥–µ URLState –ø—Ä–∞—Ü—é—î)

#### –ö—Ä–æ–∫–∏ –≤–æ—Å–ø—Ä–æ—ñ–∑–≤–µ–¥–µ–Ω–Ω—è
```
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ index.html
2. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –º—ñ—Å—Ç–æ=–ö–∏—ó–≤, —Ü—ñ–Ω–∞=50-200)
3. –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É (F5 –∞–±–æ Ctrl+R)
4. ‚ùå –§—ñ–ª—å—Ç—Ä–∏ –≤—Ç—Ä–∞—á–µ–Ω—ñ (–ø–æ—Ä–æ–∂–Ω—è —Ñ–æ—Ä–º–∞)
5. ‚ùå –õ—ñ—á–∏–ª—å–Ω–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–æ–∫–∞–∑—É—î –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
6. –ö–æ–ø—ñ—é—î–º–æ URL ‚Üí –≤—ñ–Ω –Ω–µ –º—ñ—Å—Ç–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
```

#### –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è
–†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `updateURLState()` –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º `URLState.replaceDebounced()`:

```javascript
function updateURLState() {
  const state = {
    q: filters.searchQuery,
    city: filters.city || '',
    type: filters.type || '',
    transaction: filters.transaction || '',
    priceMin: filters.priceMin || '',
    priceMax: filters.priceMax || '',
    areaMin: filters.areaMin || '',
    areaMax: filters.areaMax || '',
    rooms: filters.rooms || '',
    view: currentView
  };
  
  const qs = URLState.stringify(state);
  if (typeof history !== 'undefined' && typeof location !== 'undefined') {
    history.replaceState(null, '', `${location.pathname}${qs ? '?' + qs : ''}`);
  }
}
```

**–ü—Ä–∏–∑–≤–∏—á–∞–π–Ω—ñ –≤—ã–∑–∏–≤–∞—Ç–∏**: `applyFilters()`, `setView()`, `toggleAdvancedFilters()`

---

### BUG-2: "–ü–æ–∫–∞–∑–∞—Ç–∏ —â–µ" (#load-more-btn) –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î displayedCount –∑ URL

**–°–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å**: üî¥ **–ö–†–ò–¢–ò–ß–ù–ê**  
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `js/script.js` (loadMoreProperties, index.html)

#### –û–ø–∏—Å
–ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–ª—ñ–∫–∞—î "#load-more-btn", `displayedCount` –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è, –∞–ª–µ:
- üö´ URL –Ω–µ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è (–Ω–µ–º–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ offset –∞–±–æ perPage)
- üö´ –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ 12 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
- üö´ –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å–∫–æ–ø—ñ—é—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –ø—ñ—Å–ª—è "–ø–æ–∫–∞–∑–∞—Ç–∏ —â–µ", –Ω–æ–≤–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –ø–æ–±–∞—á–∏—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤

#### –ö—Ä–æ–∫–∏ –≤–æ—Å–ø—Ä–æ—ñ–∑–≤–µ–¥–µ–Ω–Ω—è
```
1. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ index.html –∑ 50 –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏
2. –í–∏–¥–Ω–æ 12 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (displayedCount=12)
3. –ö–ª—ñ–∫–Ω—É—Ç–∏ #load-more-btn
4. –í–∏–¥–Ω–æ 24 –µ–ª–µ–º–µ–Ω—Ç–∏ (displayedCount=24)
5. ‚ùå URL –∑–∞–ª–∏—à–∏–≤—Å—è: index.html (–±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤)
6. –°–∫–æ–ø—ñ—é—î–º–æ URL —ñ –≤—ñ–¥–∫—Ä–∏—î–º–æ –≤ –Ω–æ–≤—ñ–π –≤–∫–ª–∞–¥—Ü—ñ
7. ‚ùå –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ 12 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –Ω–µ 24
```

#### –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è
–î–æ–¥–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è displayedCount –≤ URL:

```javascript
function loadMoreProperties() {
  displayedCount += INCREMENT;
  renderProperties();
  
  // –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î–º–æ –∑ URL
  const state = {
    // ... —ñ–Ω—à—ñ —Ñ—ñ–ª—å—Ç—Ä–∏
    displayedCount: String(displayedCount)
  };
  URLState.replaceDebounced(state);
}
```

---

### BUG-3: –î—É–±–ª—ñ–∫—É–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø—Ä–∏ —à–≤–∏–¥–∫–æ–º—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—ñ –º–µ–∂–¥—É "grid" —Ç–∞ "list"

**–°–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å**: üî¥ **–ö–†–ò–¢–ò–ß–ù–ê**  
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `js/script.js` (renderProperties, setView)

#### –û–ø–∏—Å
–§—É–Ω–∫—Ü—ñ—è `renderProperties()` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è **–¥–≤—ñ—á—ñ** –≤ –∫–æ–¥—ñ (—Å—Ç—Ä–æ–∫–∏ 1337 —Ç–∞ 1497), —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ:
- üö´ –ü—Ä–∏ —à–≤–∏–¥–∫–æ–º—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—ñ view, –µ–ª–µ–º–µ–Ω—Ç–∏ –¥—É–±–ª—é—é—Ç—å—Å—è –≤ —Å—ñ—Ç—Ü—ñ
- üö´ –î—É–±–ª—ñ–∫–∞—Ç–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –Ω–∞–≤—ñ—Ç—å –ø—ñ—Å–ª—è —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è
- üö´ –õ—ñ—á–∏–ª—å–Ω–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–æ–∫–∞–∑—É—î –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### –ö—Ä–æ–∫–∏ –≤–æ—Å–ø—Ä–æ—ñ–∑–≤–µ–¥–µ–Ω–Ω—è
```
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ index.html
2. –ö–ª—ñ–∫–Ω—É—Ç–∏ grid view button (‚äû)
3. –ù–µ–≥–∞–π–Ω–æ –∫–ª—ñ–∫–Ω—É—Ç–∏ list view button (‚ò∞)
4. –ó–Ω–æ–≤—É –∫–ª—ñ–∫–Ω—É—Ç–∏ grid view
5. ‚ùå –£ –≥—Ä–∏–¥—ñ –≤–∏–¥–∏–º–æ –¥—É–±–ª—ñ—á–Ω—ñ –∫–∞—Ä—Ç–∫–∏ (–µ–ª–µ–º–µ–Ω—Ç X –∑'—è–≤–ª—è—î—Ç—å—Å—è 2+ —Ä–∞–∑—ñ–≤)
6. console: –ü–æ–º–∏–ª–æ–∫ –±–æ grid.innerHTML –Ω–µ –æ—á–∏—â–µ–Ω–∏–π –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω–æ
```

#### –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è
–í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç —Ñ—É–Ω–∫—Ü—ñ—ó `renderProperties()` —ñ –∑–∞–ª–∏—à–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ –æ–¥–Ω—É –≤–µ—Ä—Å—ñ—é –∑ –ø–æ–≤–Ω–æ—é –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –æ–±–æ—Ö –≤–∏–¥—ñ–≤:

```javascript
function setView(view) {
  currentView = view;
  localStorage.setItem('estatyq_view', view);
  
  document.querySelectorAll('.view-btn').forEach(btn => {
    const isActive = btn.getAttribute('data-view') === view;
    btn.classList.toggle('active', isActive);
    btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');
  });
  
  const grid = document.getElementById('properties-grid');
  if (grid) {
    grid.className = (view === 'list') ? 'properties-list' : 'properties-grid';
  }
  
  // –í–∏–∫–ª–∏–∫–∞—î–º–æ –¢–Ü–õ–¨–ö–ò –æ–¥–Ω—É –≤–µ—Ä—Å—ñ—é renderProperties
  renderPropertiesUnified();
}
```

---

### BUG-4: metroStations –Ω–µ —ñ–Ω—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –≤ filters –æ–±'—î–∫—Ç—ñ

**–°–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å**: üü° **–°–ï–†–ô–û–ó–ù–ê**  
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `js/script.js` (filters object, line 595)

#### –û–ø–∏—Å
–£ `filters` –æ–±'—î–∫—Ç—ñ –±—Ä–∞–∫—É—î –ø–æ–ª—è `metroStations`:

```javascript
// –†—è–¥–æ–∫ 595-631
let filters = {
  // ... —ñ–Ω—à—ñ –ø–æ–ª—è
  metro: null,  // ‚úÖ —î
  // ‚ùå metroStations –ù–ï –≤–∏–∑–Ω–∞—á–µ–Ω–µ!
};
```

–ê–ª–µ –≤ —Ñ—É–Ω–∫—Ü—ñ—è—Ö —Ç–∞–∫—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:
- –°—Ç—Ä–æ–∫–∞ 863: `filters.metroStations.splice(index, 1)`
- –°—Ç—Ä–æ–∫–∞ 864: `filters.metroStations.push(station)`
- –°—Ç—Ä–æ–∫–∞ 881: `filters.metroStations = [...new Set(allStations)]`

#### –ö—Ä–æ–∫–∏ –≤–æ—Å–ø—Ä–æ—ñ–∑–≤–µ–¥–µ–Ω–Ω—è
```
1. –ù–∞ index.html –≤–∏–±—Ä–∞—Ç–∏ –º—ñ—Å—Ç–æ –∑ –º–µ—Ç—Ä–æ (–ö–∏—ó–≤, –•–∞—Ä–∫—ñ–≤, –î–Ω—ñ–ø—Ä–æ)
2. –ö–ª—ñ–∫–Ω—É—Ç–∏ –Ω–∞ –ª—ñ–Ω—ñ—é –º–µ—Ç—Ä–æ
3. –ö–ª—ñ–∫–Ω—É—Ç–∏ –Ω–∞ —Å—Ç–∞–Ω—Ü—ñ—é
4. üî¥ Console error: "Cannot read property 'splice' of undefined"
5. –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –º–µ—Ç—Ä–æ –Ω–µ –ø—Ä–∞—Ü—é—î
```

#### –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è
–î–æ–¥–∞—Ç–∏ `metroStations: []` –≤ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é `filters`:

```javascript
let filters = {
  region: null,
  city: null,
  districts: [],
  microdistricts: [],
  metroStations: [],  // ‚Üê –î–û–î–ê–¢–ò –¶–ï
  metro: null,
  transaction: null,
  // ... —Ä–µ—à—Ç–∞ –ø–æ–ª—ñ–≤
};
```

---

### BUG-5: resetAllFilters() –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –æ—á–∏—â—É—î —Ñ–æ—Ä–º—É (–Ω–µ –æ—á–∏—â—É—î range inputs)

**–°–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å**: üü° **–°–ï–†–ô–û–ó–ù–ê**  
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `js/script.js` (resetAllFilters, line 1822)

#### –û–ø–∏—Å
`resetAllFilters()` –æ—á–∏—â—É—î `filters` –æ–±'—î–∫—Ç, –∞–ª–µ:
- ‚ùå –ù–µ –æ—á–∏—â—É—î range inputs (price-range slider)
- ‚ùå –ù–µ –æ—á–∏—â—É—î region-select / city-select / district-select
- ‚ùå –§—ñ–ª—å—Ç—Ä–∏ —Ç–∞–±–ª–∏—Ü—ñ (#filters-table-container) –º–æ–∂—É—Ç—å –∑–∞–ª–∏—à–∏—Ç–∏—Å—è –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–º–∏

#### –ö—Ä–æ–∫–∏ –≤–æ—Å–ø—Ä–æ—ñ–∑–≤–µ–¥–µ–Ω–Ω—è
```
1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ price-min=50, price-max=200
2. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ region=kyiv_region
3. –ö–ª—ñ–∫–Ω—É—Ç–∏ resetAllFilters()
4. ‚ùå –Ü–Ω–ø—É—Ç–∏ –ù–ï –æ—á–∏—â–µ–Ω—ñ (–ø–æ–∫–∞–∑—É—é—Ç—å 50 —Ç–∞ 200)
5. ‚ùå region-select –ø–æ–∫–∞–∑—É—î "–ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª" –∑–∞–º—ñ—Å—Ç—å "–í–∏–±–µ—Ä—ñ—Ç—å –æ–±–ª–∞—Å—Ç—å"
6. –§—ñ–ª—å—Ç—Ä–∏ —Ç–∞–±–ª–∏—Ü—ñ –≤—Å–µ —â–µ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è
```

#### –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è
–†–æ–∑—à–∏—Ä–∏—Ç–∏ `resetAllFilters()`:

```javascript
function resetAllFilters() {
  filters = {
    region: null,
    city: null,
    // ... reset filter object
  };
  
  // –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ input –ø–æ–ª—è
  document.getElementById('global-search').value = '';
  document.getElementById('region-select').value = '';
  document.getElementById('city-select').value = '';
  document.getElementById('district-select').value = '';
  document.getElementById('price-min').value = '';
  document.getElementById('price-max').value = '';
  document.getElementById('price-range').value = '500';  // Reset slider
  document.getElementById('area-min').value = '';
  document.getElementById('area-max').value = '';
  
  // –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –≤–∏–±—Ä–∞–Ω—ñ —á—ñ–ø—Å–∏
  document.querySelectorAll('.district-chip.active').forEach(chip => {
    chip.classList.remove('active');
  });
  
  // –û—á–∏—Å—Ç–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
  const tableContainer = document.getElementById('filters-table-container');
  if (tableContainer) {
    const inputs = tableContainer.querySelectorAll('input, select');
    inputs.forEach(input => input.value = '');
  }
  
  // –ü–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏ UI
  renderCityButtons();
  renderDistrictChips();
  renderMicrodistricts();
  renderMetro();
  updateTableFilters();
  applyFilters();
}
```

---

### BUG-6: –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è –Ω–∞ pages/catalog.html: –¥—É–±–ª—ñ–∫–∞—Ç–∏ –ø—Ä–∏ —à–≤–∏–¥–∫–æ–º—É –∫–ª—ñ–∫—É–≤–∞–Ω–Ω—é

**–°–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å**: üü° **–°–ï–†–ô–û–ó–ù–ê**  
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `js/catalog.js` (fetchAndRender, changePage)

#### –û–ø–∏—Å
–ü—Ä–∏ —à–≤–∏–¥–∫–æ–º—É –∫–ª—ñ–∫—É–≤–∞–Ω–Ω—ñ –Ω–∞ #next-page / #prev-page –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω—ñ **–∫—ñ–ª—å–∫–∞ API –∑–∞–ø–∏—Ç—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ**:
- üö´ –ü–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç –Ω–∞ page=2 –Ω–µ –∑–∞–≤–µ—Ä—à–∏–≤—Å—è
- üö´ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–ª—ñ–∫–∞—î —â–µ —Ä–∞–∑ ‚Üí –∑–∞–ø–∏—Ç –Ω–∞ page=3
- üö´ –û–±–∏–¥–≤–∞ –∑–∞–ø–∏—Ç–∏ –ø–æ–≤–µ—Ä–Ω—É–ª–∏ –¥–∞–Ω—ñ
- üö´ –û—Å—Ç–∞–Ω–Ω—ñ–π –∑–∞–ø–∏—Ç (page=3) –±—É–≤ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–µ—Ä—à–∏–º (race condition)

#### –ö—Ä–æ–∫–∏ –≤–æ—Å–ø—Ä–æ—ñ–∑–≤–µ–¥–µ–Ω–Ω—è
```
1. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ pages/catalog.html (–ª–µ–Ω—Ç–∞ –º–µ–¥–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è)
2. –®–≤–∏–¥–∫–æ –∫–ª—ñ–∫–Ω—É—Ç–∏: #next-page ‚Üí #next-page ‚Üí #next-page
3. ‚ùå Grid –º—ñ–≥ –≤–∏–≤–µ—Å—Ç–∏ –¥–∞–Ω—ñ —Å page=3, –ø–æ—Ç—ñ–º page=2 (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫)
4. üö´ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–∞–Ω—ñ
```

#### –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è
–î–æ–¥–∞—Ç–∏ —Ñ–ª–∞–≥ `isLoading` –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤:

```javascript
let isLoading = false;

function fetchAndRender() {
  if (isLoading) return;  // –ó–∞–ø–æ–±—ñ–≥—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–º –∑–∞–ø–∏—Ç–∞–º
  
  isLoading = true;
  const s = readState();
  
  // ... fetch data
  
  fetch(`/api/v2/listings?${qs}`)
    .then(/* ... */)
    .finally(() => {
      isLoading = false;  // –î–æ–∑–≤–æ–ª–∏—Ç–∏ –Ω–æ–≤—ñ –∑–∞–ø–∏—Ç–∏
    });
}
```

---

### BUG-7: aria-pressed –Ω–µ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è —É .quick-filter-btn –ø—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–º—É –≤–±–æ—Ä—ñ

**–°–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å**: üü° **–°–ï–†–ô–û–ó–ù–ê**  
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `js/script.js` (setupQuickFilters, line 2077)

#### –û–ø–∏—Å
–ö–Ω–æ–ø–∫–∏ `.quick-filter-btn` –º–∞—é—Ç—å `aria-pressed` –∞—Ç—Ä–∏–±—É—Ç, –∞–ª–µ –≤—ñ–Ω:
- ‚ùå –ù–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î—Ç—å—Å—è –∑ `.active` –∫–ª–∞—Å–æ–º
- ‚ùå –ü—Ä–∏ removeFilter() —á–µ—Ä–µ–∑ chip, aria-pressed –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —Å—Ç–∞—Ä–∏–º
- ‚ùå Screen reader –Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Å—Ç–∞–Ω –∫–Ω–æ–ø–∫–∏

#### –ö—Ä–æ–∫–∏ –≤–æ—Å–ø—Ä–æ—ñ–∑–≤–µ–¥–µ–Ω–Ω—è
```
1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ screen reader (NVDA)
2. –ù–∞ index.html –∫–ª—ñ–∫–Ω—É—Ç–∏ .quick-filter-btn[data-type="apartment"]
3. ‚úì Screen reader: "–ö–≤–∞—Ä—Ç–∏—Ä–∞, pressed"
4. –ö–ª—ñ–∫–Ω—É—Ç–∏ chip –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–∏–ø—É
5. ‚ùå Screen reader: "–ö–≤–∞—Ä—Ç–∏—Ä–∞, pressed" (–≤—Å–µ —â–µ –≤–∏—Å–æ–∫–∞!!)
6. –ö–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ HTML: aria-pressed="true" (–Ω–µ –∑–º—ñ–Ω–∏–≤—Å—è)
```

#### –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è
–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ aria-pressed –≤ setupQuickFilters():

```javascript
function setupQuickFilters() {
  document.querySelectorAll('.quick-filter-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const type = btn.getAttribute('data-type');
      selectType(type);
      
      // –û–Ω–æ–≤–∏—Ç–∏ aria-pressed –¥–ª—è —É—Å—ñ—Ö –∫–Ω–æ–ø–æ–∫
      document.querySelectorAll('.quick-filter-btn').forEach(b => {
        const isActive = b.getAttribute('data-type') === filters.type;
        b.classList.toggle('active', isActive);
        b.setAttribute('aria-pressed', isActive ? 'true' : 'false');
      });
    });
  });
}
```

---

## üü° –°–ï–†–ô–û–ó–ù–Ü –ü–†–û–ë–õ–ï–ú–ò

### BUG-8: setView() –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î —Å—Ç–∞–Ω –ø—Ä–∏ applyFilters()

**–°–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å**: üü° **–°–ï–†–ô–û–ó–ù–ê**  
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

#### –û–ø–∏—Å
–ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î view="list" —ñ –ø–æ—Ç—ñ–º –∑–º—ñ–Ω—é—î —Ñ—ñ–ª—å—Ç—Ä–∏:
- üö´ applyFilters() –≤–∏–∫–ª–∏–∫–∞—î renderProperties()
- üö´ renderProperties() –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î currentView
- üö´ –í–∏–¥ —Å–∫–∏–¥—É—î—Ç—å—Å—è –Ω–∞ 'grid' (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)

#### –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è
–ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ `currentView` –≤ renderProperties() –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º

---

### BUG-9: #found-counter –Ω–µ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –Ω–∞ pages/catalog.html

**–°–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å**: üü° **–°–ï–†–ô–û–ó–ù–ê**  
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

#### –û–ø–∏—Å
–ù–∞ pages/catalog.html –ª—ñ—á–∏–ª—å–Ω–∏–∫ `#found-counter` –Ω–µ –ø–æ–∫–∞–∑—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤

#### –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è
–î–æ–¥–∞—Ç–∏ `foundCounter.textContent = \`–ó–Ω–∞–π–¥–µ–Ω–æ: \${total}\`` –≤ —Ñ—É–Ω–∫—Ü—ñ—é render()

---

### BUG-10: –ù–µ–º–∞—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞ empty options –≤ select —Ñ—ñ–ª—å—Ç—Ä–∞—Ö

**–°–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å**: üü° **–°–ï–†–ô–û–ó–ù–ê**  
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

#### –û–ø–∏—Å
–°–µ–ª–µ–∫—Ç–∏ (region, city, district) –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø—É—Å—Ç—ñ, —è–∫—â–æ –¥–∞–Ω—ñ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ

#### –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è
–î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —É renderCityButtons(), updateCitySelect() –ø–µ—Ä–µ–¥ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è–º

---

## üü¢ –ù–ò–ó–¨–ö–Ü –ü–†–Ü–û–†–ò–¢–ï–¢–ò

### BUG-11: –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–µ

**–°–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å**: üü¢ **–ù–ò–ó–¨–ö–ê**  
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ß–∞—Å—Ç–∫–æ–≤–æ

–ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ API, –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è "–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞" –±–µ–∑ –¥–µ—Ç–∞–ª–µ–π.

**–†–æ–∑–≤'—è–∑–∞–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:
- "–ü—Ä–æ–±–ª–µ–º–∞ –∑ –º–µ—Ä–µ–∂–µ—é" - 0ms timeout
- "–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π" - 500/503
- "–ù–µ–º–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤" - 200 –∞–ª–µ –ø—É—Å—Ç–æ

---

## ‚úÖ –î–Ü–á –î–õ–Ø –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

### –ï—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–Ω—ñ (üî¥)
1. [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `updateURLState()` –Ω–∞ index.html
2. [ ] –î–æ–¥–∞—Ç–∏ `metroStations: []` –≤ filters
3. [ ] –í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç `renderProperties()`
4. [ ] –í–∏–ø—Ä–∞–≤–∏—Ç–∏ loadMoreProperties() –∑ URL-—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é

### –ï—Ç–∞–ø 2: –°–µ—Ä–π–æ–∑–Ω—ñ (üü°)
5. [ ] –†–æ–∑—à–∏—Ä–∏—Ç–∏ `resetAllFilters()` + –æ—á–∏—Å—Ç–∏—Ç–∏ —Å–µ–ª–µ–∫—Ç–∏
6. [ ] –î–æ–¥–∞—Ç–∏ isLoading —Ñ–ª–∞–≥ –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è race conditions
7. [ ] –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ `aria-pressed` —É setupQuickFilters()
8. [ ] –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ currentView –≤ renderProperties()

### –ï—Ç–∞–ø 3: –ù–∏–∑—å–∫—ñ (üü¢)
9. [ ] –ü–æ–ª—ñ–ø—à–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏
10. [ ] –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ empty options

---

## üìù –ü–ï–†–ï–í–Ü–†–ö–ê –ü–Ü–°–õ–Ø –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

–ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è, –∑–∞–ø—É—Å—Ç–∏—Ç–∏:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏
npm test tests/filters-pagination.test.js

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ console –ø–æ–º–∏–ª–æ–∫
npm start  # —Ç–∞ –≤—ñ–¥–∫—Ä–∏—Ç–∏ DevTools
```

---

## üìé –°–ö–†–ò–ù–ò / –í–Ü–î–ï–û–ó–ê–ü–ò–°–ò

(–î–æ–¥–∞—Ç–∏ —Å–∫—Ä–∏–Ω–∏ –ø–æ–º–∏–ª–æ–∫ –∑ Developer Tools console)

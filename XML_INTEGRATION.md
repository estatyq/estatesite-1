# üìÑ XML –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è EstatyQ –ö–∞—Ç–∞–ª–æ–≥–∞

## üéØ –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É XML —Ñ–∞–π–ª–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ EstatyQ. XML —Ñ–∞–π–ª –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏, –≤–∫–ª—é—á–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ XML

### –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```xml
<?xml version="1.0" encoding="UTF-8"?>
<estatyq_catalog version="1.0" last_updated="2025-01-20T10:30:00Z">
    <cities>
        <city id="kyiv" name="–ö–∏—ó–≤" region="–ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">
            <districts>
                <district id="pechersk" name="–ü–µ—á–µ—Ä—Å—å–∫">
                    <microdistricts>
                        <microdistrict id="khreshchatyk" name="–í—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫"/>
                        <microdistrict id="lipky" name="–í—É–ª. –õ–∏–ø–∫–∏"/>
                    </microdistricts>
                </district>
                <!-- –î—Ä—É–≥–∏–µ —Ä–∞–π–æ–Ω—ã -->
            </districts>
            <metro>
                <line id="red" name="–ß–µ—Ä–≤–æ–Ω–∞ –ª—ñ–Ω—ñ—è" color="#FF0000">
                    <station id="akademmistechko" name="–ê–∫–∞–¥–µ–º–º—ñ—Å—Ç–µ—á–∫–æ"/>
                    <station id="zhytomyrska" name="–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞"/>
                    <!-- –î—Ä—É–≥–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ -->
                </line>
                <!-- –î—Ä—É–≥–∏–µ –ª–∏–Ω–∏–∏ -->
            </metro>
        </city>
        <!-- –î—Ä—É–≥–∏–µ –≥–æ—Ä–æ–¥–∞ -->
    </cities>
    
    <properties>
        <property id="1" type="apartment" transaction="sale" city="kyiv" district="pechersk">
            <title>–°—É—á–∞—Å–Ω–∞ –∫–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä—ñ</title>
            <description>–†–æ–∑–∫—ñ—à–Ω–∞ –∫–≤–∞—Ä—Ç–∏—Ä–∞ –∑ –ø–∞–Ω–æ—Ä–∞–º–Ω–∏–º–∏ –≤—ñ–∫–Ω–∞–º–∏ –≤ —ñ—Å—Ç–æ—Ä–∏—á–Ω–æ–º—É —Ü–µ–Ω—Ç—Ä—ñ –º—ñ—Å—Ç–∞</description>
            <price currency="USD">85000</price>
            <area total="85" living="65" kitchen="12"/>
            <rooms>3</rooms>
            <floor current="5" total="9"/>
            <year>2020</year>
            <features>
                <feature>–ë–∞–ª–∫–æ–Ω</feature>
                <feature>–ü–∞—Ä–∫—ñ–Ω–≥</feature>
                <feature>–õ—ñ—Ñ—Ç</feature>
                <feature>–ö–æ–Ω–¥–∏—Ü—ñ–æ–Ω–µ—Ä</feature>
            </features>
            <images>
                <image id="1" url="https://example.com/images/property1_1.jpg" alt="–ì–æ—Å—Ç–∏–Ω–∞" primary="true"/>
                <image id="2" url="https://example.com/images/property1_2.jpg" alt="–ö—É—Ö–Ω—è"/>
                <image id="3" url="https://example.com/images/property1_3.jpg" alt="–°–ø–∞–ª—å–Ω—è"/>
            </images>
            <contact>
                <agent name="–û–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ç—Ä–µ–Ω–∫–æ" phone="+380441234567" email="agent@estatyq.ua"/>
                <telegram bot="estatyq_kyiv" chat_id="123456789"/>
            </contact>
            <location>
                <address>–≤—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫, 22</address>
                <coordinates lat="50.4501" lng="30.5234"/>
                <metro station="–•—Ä–µ—â–∞—Ç–∏–∫" line="red" distance="200"/>
            </location>
            <status>active</status>
            <created>2025-01-15T14:30:00Z</created>
            <updated>2025-01-20T09:15:00Z</updated>
        </property>
        <!-- –î—Ä—É–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã -->
    </properties>
</estatyq_catalog>
```

## üèó –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞

### –≠–ª–µ–º–µ–Ω—Ç `<estatyq_catalog>`

**–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `version` - –≤–µ—Ä—Å–∏—è —Å—Ö–µ–º—ã XML
- `last_updated` - –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –≠–ª–µ–º–µ–Ω—Ç `<city>`

**–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥–æ—Ä–æ–¥–∞
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
- `region` - –æ–±–ª–∞—Å—Ç—å

**–î–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**
- `<districts>` - —Å–ø–∏—Å–æ–∫ —Ä–∞–π–æ–Ω–æ–≤
- `<metro>` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Ç—Ä–æ

### –≠–ª–µ–º–µ–Ω—Ç `<district>`

**–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–∞–π–æ–Ω–∞
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–π–æ–Ω–∞

**–î–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**
- `<microdistricts>` - —Å–ø–∏—Å–æ–∫ –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω–æ–≤

### –≠–ª–µ–º–µ–Ω—Ç `<property>`

**–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞
- `type` - —Ç–∏–ø –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ (apartment, house, commercial, office, land, warehouse)
- `transaction` - —Ç–∏–ø —Å–¥–µ–ª–∫–∏ (sale, rent, daily)
- `city` - ID –≥–æ—Ä–æ–¥–∞
- `district` - ID —Ä–∞–π–æ–Ω–∞

**–î–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**
- `<title>` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±—ä–µ–∫—Ç–∞
- `<description>` - –æ–ø–∏—Å–∞–Ω–∏–µ
- `<price>` - —Ü–µ–Ω–∞ —Å –≤–∞–ª—é—Ç–æ–π
- `<area>` - –ø–ª–æ—â–∞–¥–∏ (–æ–±—â–∞—è, –∂–∏–ª–∞—è, –∫—É—Ö–Ω—è)
- `<rooms>` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç
- `<floor>` - —ç—Ç–∞–∂ (—Ç–µ–∫—É—â–∏–π –∏ –æ–±—â–∏–π)
- `<year>` - –≥–æ–¥ –ø–æ—Å—Ç—Ä–æ–π–∫–∏
- `<features>` - –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- `<images>` - —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- `<contact>` - –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `<location>` - –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- `<status>` - —Å—Ç–∞—Ç—É—Å (active, sold, rented, inactive)
- `<created>` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `<updated>` - –¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üì∏ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```xml
<images>
    <image id="1" url="https://example.com/images/property1_1.jpg" 
           alt="–ì–æ—Å—Ç–∏–Ω–∞" primary="true" order="1"/>
    <image id="2" url="https://example.com/images/property1_2.jpg" 
           alt="–ö—É—Ö–Ω—è" order="2"/>
    <image id="3" url="https://example.com/images/property1_3.jpg" 
           alt="–°–ø–∞–ª—å–Ω—è" order="3"/>
</images>
```

**–ê—Ç—Ä–∏–±—É—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `url` - URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `alt` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç
- `primary` - –æ—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (true/false)
- `order` - –ø–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

## üó∫ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏

```xml
<location>
    <address>–≤—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫, 22</address>
    <coordinates lat="50.4501" lng="30.5234"/>
    <metro station="–•—Ä–µ—â–∞—Ç–∏–∫" line="red" distance="200"/>
    <district_microdistrict>–ü–µ—á–µ—Ä—Å—å–∫, –í—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫</district_microdistrict>
</location>
```

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

```xml
<contact>
    <agent name="–û–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ç—Ä–µ–Ω–∫–æ" 
           phone="+380441234567" 
           email="agent@estatyq.ua"
           photo="https://example.com/agents/agent1.jpg"/>
    <telegram bot="estatyq_kyiv" chat_id="123456789"/>
    <whatsapp phone="+380441234567"/>
    <viber phone="+380441234567"/>
</contact>
```

## üè∑ –¢–∏–ø—ã –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

### –ö–≤–∞—Ä—Ç–∏—Ä—ã (apartment)
```xml
<property type="apartment">
    <area total="85" living="65" kitchen="12" balcony="5"/>
    <rooms>3</rooms>
    <floor current="5" total="9"/>
    <features>
        <feature>–ë–∞–ª–∫–æ–Ω</feature>
        <feature>–õ–æ–¥–∂—ñ—è</feature>
        <feature>–ü–∞—Ä–∫—ñ–Ω–≥</feature>
        <feature>–õ—ñ—Ñ—Ç</feature>
    </features>
</property>
```

### –î–æ–º–∞ (house)
```xml
<property type="house">
    <area total="150" living="120" kitchen="20"/>
    <rooms>4</rooms>
    <floor current="2" total="2"/>
    <plot_area unit="—Å–æ—Ç–æ–∫">8</plot_area>
    <features>
        <feature>–ì–∞—Ä–∞–∂</feature>
        <feature>–°–∞–¥</feature>
        <feature>–ö–∞–º—ñ–Ω</feature>
        <feature>–¢–µ—Ä–∞—Å–∞</feature>
    </features>
</property>
```

### –ö–æ–º–µ—Ä—Ü—ñ—è (commercial)
```xml
<property type="commercial">
    <area total="120"/>
    <floor current="1" total="3"/>
    <commercial_type>–ú–∞–≥–∞–∑–∏–Ω</commercial_type>
    <features>
        <feature>–í—ñ—Ç—Ä–∏–Ω–∞</feature>
        <feature>–°–∫–ª–∞–¥</feature>
        <feature>–ü–∞—Ä–∫—ñ–Ω–≥</feature>
    </features>
</property>
```

## üí∞ –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

```xml
<price currency="USD" original="85000" current="80000">
    <per_sqm>941</per_sqm>
    <negotiable>true</negotiable>
    <discount type="percentage">6</discount>
</price>
```

## üîÑ –°—Ç–∞—Ç—É—Å—ã –æ–±—ä–µ–∫—Ç–æ–≤

- `active` - –∞–∫—Ç–∏–≤–Ω—ã–π, –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- `sold` - –ø—Ä–æ–¥–∞–Ω
- `rented` - —Å–¥–∞–Ω –≤ –∞—Ä–µ–Ω–¥—É
- `inactive` - –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–π, —Å–∫—Ä—ã—Ç
- `reserved` - –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω
- `pending` - –æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

## üìä –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ XML —Ñ–∞–π–ª–∞

```xml
<?xml version="1.0" encoding="UTF-8"?>
<estatyq_catalog version="1.0" last_updated="2025-01-20T10:30:00Z">
    <cities>
        <city id="kyiv" name="–ö–∏—ó–≤" region="–ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">
            <districts>
                <district id="pechersk" name="–ü–µ—á–µ—Ä—Å—å–∫">
                    <microdistricts>
                        <microdistrict id="khreshchatyk" name="–í—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫"/>
                        <microdistrict id="lipky" name="–í—É–ª. –õ–∏–ø–∫–∏"/>
                    </microdistricts>
                </district>
                <district id="obolon" name="–û–±–æ–ª–æ–Ω—å">
                    <microdistricts>
                        <microdistrict id="pivnichna" name="–ü—ñ–≤–Ω—ñ—á–Ω–∞ –û–±–æ–ª–æ–Ω—å"/>
                        <microdistrict id="pivdenna" name="–ü—ñ–≤–¥–µ–Ω–Ω–∞ –û–±–æ–ª–æ–Ω—å"/>
                    </microdistricts>
                </district>
            </districts>
            <metro>
                <line id="red" name="–ß–µ—Ä–≤–æ–Ω–∞ –ª—ñ–Ω—ñ—è" color="#FF0000">
                    <station id="akademmistechko" name="–ê–∫–∞–¥–µ–º–º—ñ—Å—Ç–µ—á–∫–æ"/>
                    <station id="zhytomyrska" name="–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞"/>
                    <station id="svyatoshyn" name="–°–≤—è—Ç–æ—à–∏–Ω"/>
                    <station id="khreshchatyk" name="–•—Ä–µ—â–∞—Ç–∏–∫"/>
                </line>
                <line id="blue" name="–°–∏–Ω—è –ª—ñ–Ω—ñ—è" color="#0000FF">
                    <station id="heroiv_dnipra" name="–ì–µ—Ä–æ—ó–≤ –î–Ω—ñ–ø—Ä–∞"/>
                    <station id="minska" name="–ú—ñ–Ω—Å—å–∫–∞"/>
                    <station id="obolon" name="–û–±–æ–ª–æ–Ω—å"/>
                </line>
            </metro>
        </city>
    </cities>
    
    <properties>
        <property id="1" type="apartment" transaction="sale" city="kyiv" district="pechersk">
            <title>–†–æ–∑–∫—ñ—à–Ω–∞ –∫–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä—ñ –ö–∏—î–≤–∞</title>
            <description>–°—É—á–∞—Å–Ω–∞ –∫–≤–∞—Ä—Ç–∏—Ä–∞ –∑ –ø–∞–Ω–æ—Ä–∞–º–Ω–∏–º–∏ –≤—ñ–∫–Ω–∞–º–∏ –≤ —ñ—Å—Ç–æ—Ä–∏—á–Ω–æ–º—É —Ü–µ–Ω—Ç—Ä—ñ –º—ñ—Å—Ç–∞. –Ñ–≤—Ä–æ–ø–µ—Å—å–∫–∏–π —Ä–µ–º–æ–Ω—Ç, –≤—Å—ñ –∑—Ä—É—á–Ω–æ—Å—Ç—ñ.</description>
            <price currency="USD">85000</price>
            <area total="85" living="65" kitchen="12" balcony="5"/>
            <rooms>3</rooms>
            <floor current="5" total="9"/>
            <year>2020</year>
            <features>
                <feature>–ë–∞–ª–∫–æ–Ω</feature>
                <feature>–ü–∞—Ä–∫—ñ–Ω–≥</feature>
                <feature>–õ—ñ—Ñ—Ç</feature>
                <feature>–ö–æ–Ω–¥–∏—Ü—ñ–æ–Ω–µ—Ä</feature>
                <feature>–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç</feature>
            </features>
            <images>
                <image id="1" url="https://example.com/images/property1_1.jpg" alt="–ì–æ—Å—Ç–∏–Ω–∞" primary="true" order="1"/>
                <image id="2" url="https://example.com/images/property1_2.jpg" alt="–ö—É—Ö–Ω—è" order="2"/>
                <image id="3" url="https://example.com/images/property1_3.jpg" alt="–°–ø–∞–ª—å–Ω—è" order="3"/>
                <image id="4" url="https://example.com/images/property1_4.jpg" alt="–ë–∞–ª–∫–æ–Ω" order="4"/>
            </images>
            <contact>
                <agent name="–û–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ç—Ä–µ–Ω–∫–æ" phone="+380441234567" email="agent@estatyq.ua"/>
                <telegram bot="estatyq_kyiv" chat_id="123456789"/>
            </contact>
            <location>
                <address>–≤—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫, 22</address>
                <coordinates lat="50.4501" lng="30.5234"/>
                <metro station="–•—Ä–µ—â–∞—Ç–∏–∫" line="red" distance="200"/>
                <district_microdistrict>–ü–µ—á–µ—Ä—Å—å–∫, –í—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫</district_microdistrict>
            </location>
            <status>active</status>
            <created>2025-01-15T14:30:00Z</created>
            <updated>2025-01-20T09:15:00Z</updated>
        </property>
    </properties>
</estatyq_catalog>
```

## üîß JavaScript –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ XML

```javascript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ XML
async function loadPropertiesFromXML(xmlUrl) {
    try {
        const response = await fetch(xmlUrl);
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
        
        // –ü–∞—Ä—Å–∏–º –≥–æ—Ä–æ–¥–∞
        const cities = parseCities(xmlDoc);
        
        // –ü–∞—Ä—Å–∏–º –æ–±—ä–µ–∫—Ç—ã –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
        const properties = parseProperties(xmlDoc);
        
        return { cities, properties };
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ XML:', error);
        return { cities: {}, properties: [] };
    }
}

// –ü–∞—Ä—Å–∏–Ω–≥ –≥–æ—Ä–æ–¥–æ–≤
function parseCities(xmlDoc) {
    const cities = {};
    const cityElements = xmlDoc.querySelectorAll('city');
    
    cityElements.forEach(cityEl => {
        const cityId = cityEl.getAttribute('id');
        const cityName = cityEl.getAttribute('name');
        const region = cityEl.getAttribute('region');
        
        cities[cityId] = {
            name: cityName,
            region: region,
            districts: {},
            metro: { lines: {} }
        };
        
        // –ü–∞—Ä—Å–∏–º —Ä–∞–π–æ–Ω—ã
        const districtElements = cityEl.querySelectorAll('district');
        districtElements.forEach(districtEl => {
            const districtId = districtEl.getAttribute('id');
            const districtName = districtEl.getAttribute('name');
            
            cities[cityId].districts[districtId] = {
                name: districtName,
                microdistricts: []
            };
            
            // –ü–∞—Ä—Å–∏–º –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω—ã
            const microdistrictElements = districtEl.querySelectorAll('microdistrict');
            microdistrictElements.forEach(microEl => {
                cities[cityId].districts[districtId].microdistricts.push({
                    id: microEl.getAttribute('id'),
                    name: microEl.getAttribute('name')
                });
            });
        });
        
        // –ü–∞—Ä—Å–∏–º –º–µ—Ç—Ä–æ
        const metroElement = cityEl.querySelector('metro');
        if (metroElement) {
            const lineElements = metroElement.querySelectorAll('line');
            lineElements.forEach(lineEl => {
                const lineId = lineEl.getAttribute('id');
                const lineName = lineEl.getAttribute('name');
                const lineColor = lineEl.getAttribute('color');
                
                cities[cityId].metro.lines[lineName] = {
                    id: lineId,
                    color: lineColor,
                    stations: []
                };
                
                const stationElements = lineEl.querySelectorAll('station');
                stationElements.forEach(stationEl => {
                    cities[cityId].metro.lines[lineName].stations.push({
                        id: stationEl.getAttribute('id'),
                        name: stationEl.getAttribute('name')
                    });
                });
            });
        }
    });
    
    return cities;
}

// –ü–∞—Ä—Å–∏–Ω–≥ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
function parseProperties(xmlDoc) {
    const properties = [];
    const propertyElements = xmlDoc.querySelectorAll('property');
    
    propertyElements.forEach(propEl => {
        const property = {
            id: parseInt(propEl.getAttribute('id')),
            type: propEl.getAttribute('type'),
            transactionType: propEl.getAttribute('transaction'),
            city: propEl.getAttribute('city'),
            district: propEl.getAttribute('district'),
            title: propEl.querySelector('title')?.textContent || '',
            description: propEl.querySelector('description')?.textContent || '',
            price: parseFloat(propEl.querySelector('price')?.textContent || '0'),
            currency: propEl.querySelector('price')?.getAttribute('currency') || 'USD',
            area: {
                total: parseFloat(propEl.querySelector('area')?.getAttribute('total') || '0'),
                living: parseFloat(propEl.querySelector('area')?.getAttribute('living') || '0'),
                kitchen: parseFloat(propEl.querySelector('area')?.getAttribute('kitchen') || '0'),
                balcony: parseFloat(propEl.querySelector('area')?.getAttribute('balcony') || '0')
            },
            rooms: parseInt(propEl.querySelector('rooms')?.textContent || '0'),
            floor: {
                current: parseInt(propEl.querySelector('floor')?.getAttribute('current') || '0'),
                total: parseInt(propEl.querySelector('floor')?.getAttribute('total') || '0')
            },
            year: parseInt(propEl.querySelector('year')?.textContent || '0'),
            features: [],
            images: [],
            contact: {},
            location: {},
            status: propEl.querySelector('status')?.textContent || 'active',
            created: propEl.querySelector('created')?.textContent || '',
            updated: propEl.querySelector('updated')?.textContent || ''
        };
        
        // –ü–∞—Ä—Å–∏–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
        const featureElements = propEl.querySelectorAll('feature');
        featureElements.forEach(featureEl => {
            property.features.push(featureEl.textContent);
        });
        
        // –ü–∞—Ä—Å–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        const imageElements = propEl.querySelectorAll('image');
        imageElements.forEach(imgEl => {
            property.images.push({
                id: imgEl.getAttribute('id'),
                url: imgEl.getAttribute('url'),
                alt: imgEl.getAttribute('alt'),
                primary: imgEl.getAttribute('primary') === 'true',
                order: parseInt(imgEl.getAttribute('order') || '0')
            });
        });
        
        // –ü–∞—Ä—Å–∏–º –∫–æ–Ω—Ç–∞–∫—Ç—ã
        const contactEl = propEl.querySelector('contact');
        if (contactEl) {
            const agentEl = contactEl.querySelector('agent');
            if (agentEl) {
                property.contact.agent = {
                    name: agentEl.getAttribute('name'),
                    phone: agentEl.getAttribute('phone'),
                    email: agentEl.getAttribute('email'),
                    photo: agentEl.getAttribute('photo')
                };
            }
            
            const telegramEl = contactEl.querySelector('telegram');
            if (telegramEl) {
                property.contact.telegram = {
                    bot: telegramEl.getAttribute('bot'),
                    chatId: telegramEl.getAttribute('chat_id')
                };
            }
        }
        
        // –ü–∞—Ä—Å–∏–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
        const locationEl = propEl.querySelector('location');
        if (locationEl) {
            property.location = {
                address: locationEl.querySelector('address')?.textContent || '',
                coordinates: {
                    lat: parseFloat(locationEl.querySelector('coordinates')?.getAttribute('lat') || '0'),
                    lng: parseFloat(locationEl.querySelector('coordinates')?.getAttribute('lng') || '0')
                },
                metro: {
                    station: locationEl.querySelector('metro')?.getAttribute('station') || '',
                    line: locationEl.querySelector('metro')?.getAttribute('line') || '',
                    distance: parseInt(locationEl.querySelector('metro')?.getAttribute('distance') || '0')
                },
                districtMicrodistrict: locationEl.querySelector('district_microdistrict')?.textContent || ''
            };
        }
        
        properties.push(property);
    });
    
    return properties;
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å XML –¥–∞–Ω–Ω—ã–º–∏
async function initializeWithXML() {
    const { cities, properties } = await loadPropertiesFromXML('data/properties.xml');
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    window.citiesData = cities;
    window.allProperties = properties;
    window.filteredProperties = [...properties];
    
    // –ü–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    renderProperties();
    updateResultsCount();
    updateDistrictChips();
    updateMetroFilters();
}
```

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞–∑–±–∏–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ XML —Ñ–∞–π–ª—ã –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ –≥–æ—Ä–æ–¥–∞–º
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–µ `last_updated` –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ XML –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ö–µ–º–µ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
4. **–°–∂–∞—Ç–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ gzip —Å–∂–∞—Ç–∏–µ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
5. **CDN**: –†–∞–∑–º–µ—â–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ CDN –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞–π—Ç–µ XML —Ñ–∞–π–ª –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–π —Å—Ö–µ–º–µ
2. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. –û–±–Ω–æ–≤–∏—Ç–µ JavaScript –∫–æ–¥ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ XML
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏! üöÄ**
====================================================================
  POSTGRESQL INITIALIZATION COMMANDS
  Copy and paste these commands in PostgreSQL CLI (psql)
====================================================================

STEP 1: Connect to PostgreSQL as superuser
========================================
psql -U postgres

Or on Linux:
sudo -u postgres psql


STEP 2: Create Database
=======================
CREATE DATABASE estatyq_db;


STEP 3: Create User with Password
==================================
CREATE USER estatyq_user WITH PASSWORD 'password123';


STEP 4: Grant Privileges on Database
====================================
GRANT ALL PRIVILEGES ON DATABASE estatyq_db TO estatyq_user;


STEP 5: Connect to Database
===========================
\c estatyq_db


STEP 6: Grant Schema Privileges
===============================
GRANT ALL ON SCHEMA public TO estatyq_user;


STEP 7: Create Listings Table
=============================
CREATE TABLE IF NOT EXISTS listings (
  id VARCHAR(50) PRIMARY KEY,
  type VARCHAR(50),
  transaction_type VARCHAR(20),
  price_value NUMERIC,
  price_currency VARCHAR(10),
  area_total NUMERIC,
  area_living NUMERIC,
  area_plot NUMERIC,
  rooms INT,
  floor_current INT,
  floor_total INT,
  year_built INT,
  location_country VARCHAR(100),
  location_region VARCHAR(100),
  location_city VARCHAR(100),
  location_city_key VARCHAR(50),
  location_district VARCHAR(100),
  location_microdistrict VARCHAR(100),
  location_address VARCHAR(255),
  geo_lat NUMERIC,
  geo_lng NUMERIC,
  amenities_balcony BOOLEAN,
  amenities_parking BOOLEAN,
  amenities_metro VARCHAR(100),
  amenities_features TEXT[],
  images TEXT[],
  contact_phone VARCHAR(20),
  contact_email VARCHAR(100),
  contact_name VARCHAR(100),
  description TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  is_active BOOLEAN DEFAULT true
);


STEP 8: Create Indexes
======================
CREATE INDEX IF NOT EXISTS idx_listings_city ON listings(location_city_key);
CREATE INDEX IF NOT EXISTS idx_listings_type ON listings(type);
CREATE INDEX IF NOT EXISTS idx_listings_transaction ON listings(transaction_type);
CREATE INDEX IF NOT EXISTS idx_listings_price ON listings(price_value);
CREATE INDEX IF NOT EXISTS idx_listings_active ON listings(is_active);


STEP 9: Grant Table Privileges
==============================
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO estatyq_user;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO estatyq_user;


VERIFICATION COMMANDS
====================

Check database:
\l

Check user:
\du

Check tables:
\dt

Check indexes:
\di

Count rows:
SELECT COUNT(*) FROM listings;


EXIT
====
\q


QUICK REFERENCE
===============

Database Name:    estatyq_db
User Name:        estatyq_user
Password:         password123
Port:             5432
Host:             localhost
Table Name:       listings
Columns:          30
Indexes:          5
Status:           Ready for data


LINUX/MACOS ALL-IN-ONE
======================

psql -U postgres << EOF
CREATE DATABASE estatyq_db;
CREATE USER estatyq_user WITH PASSWORD 'password123';
GRANT ALL PRIVILEGES ON DATABASE estatyq_db TO estatyq_user;
\c estatyq_db
GRANT ALL ON SCHEMA public TO estatyq_user;
CREATE TABLE IF NOT EXISTS listings (
  id VARCHAR(50) PRIMARY KEY,
  type VARCHAR(50),
  transaction_type VARCHAR(20),
  price_value NUMERIC,
  price_currency VARCHAR(10),
  area_total NUMERIC,
  area_living NUMERIC,
  area_plot NUMERIC,
  rooms INT,
  floor_current INT,
  floor_total INT,
  year_built INT,
  location_country VARCHAR(100),
  location_region VARCHAR(100),
  location_city VARCHAR(100),
  location_city_key VARCHAR(50),
  location_district VARCHAR(100),
  location_microdistrict VARCHAR(100),
  location_address VARCHAR(255),
  geo_lat NUMERIC,
  geo_lng NUMERIC,
  amenities_balcony BOOLEAN,
  amenities_parking BOOLEAN,
  amenities_metro VARCHAR(100),
  amenities_features TEXT[],
  images TEXT[],
  contact_phone VARCHAR(20),
  contact_email VARCHAR(100),
  contact_name VARCHAR(100),
  description TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  is_active BOOLEAN DEFAULT true
);
CREATE INDEX idx_listings_city ON listings(location_city_key);
CREATE INDEX idx_listings_type ON listings(type);
CREATE INDEX idx_listings_transaction ON listings(transaction_type);
CREATE INDEX idx_listings_price ON listings(price_value);
CREATE INDEX idx_listings_active ON listings(is_active);
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO estatyq_user;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO estatyq_user;
EOF

====================================================================
